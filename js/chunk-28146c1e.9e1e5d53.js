(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28146c1e"],{1158:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"html"},[o("MainHeader",{staticClass:"navigation"}),o("div",{staticClass:"container body"},[o("router-view")],1),o("MainFooter")],1)},i=[],n=(o("d3b7"),o("25f0"),o("2b0e")),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-navbar",{staticClass:"header",attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[o("b-navbar-brand",{staticClass:"nav-link",attrs:{variant:"info"},on:{click:t.goHome}},[t._v(" 孜宮庭園 ")]),o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",[o("b-nav-item",{staticClass:"nav-link",attrs:{variant:"info"},on:{click:t.goHome}},[t._v(" Home ")])],1),o("b-nav-form",{staticClass:"ml-auto"},[o("b-input-group",{attrs:{size:"sm"}},[o("b-form-input",{attrs:{list:"searchInput",placeholder:"Search Shop",debounce:"500"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),o("datalist",{attrs:{id:"searchInput"}},t._l(t.search_shopName,(function(e){return o("option",{key:e},[t._v(" "+t._s(e))])})),0),o("b-input-group-prepend",[o("b-button",{attrs:{variant:"success"},on:{click:t.goSearch}},[t._v("Search")])],1)],1)],1),o("b-navbar-nav",{staticClass:"ml-4 mr-3"},[null==this.$store.getters["auth/token"]||2==this.$store.getters["auth/user"].permission&&t.showShoppingCart?o("ShoppingCart"):t._e()],1),o("b-navbar-nav",[o("LoginNav",{ref:"loginNav"})],1)],1)],1)],1)},a=[],c=(o("a15b"),o("d81d"),o("b0c0"),o("ac1f"),o("1276"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"my-container"}},[o("div",[o("b-icon",{ref:"button",attrs:{icon:"cart4","font-scale":"2.5",id:"popover-reactive-1"},on:{click:function(e){return t.loadingData()}}})],1),o("b-popover",{ref:"popover",attrs:{"custom-class":"wide-popover",target:"popover-reactive-1",triggers:"click",show:t.popoverShow,placement:"auto",container:"my-container"},on:{"update:show":function(e){t.popoverShow=e}},scopedSlots:t._u([{key:"title",fn:function(){return[o("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:t.onClose}},[o("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" 訂購餐廳："+t._s(t.bookingShopName)+" ")]},proxy:!0}])},[t._l(t.ItemList,(function(e,s){return o("div",{key:s,staticClass:"productbd"},[o("CartCell",t._b({attrs:{index:s},on:{deleteclick:t.deleteCartCell,spinClick:t.modifySpinValue,deleteCoupon:t.deleteCoupon}},"CartCell",e,!1))],1)})),0!=t.productNum?o("div",{staticClass:"tlprice",attrs:{id:"coupon"}},[o("b-input-group",{staticClass:"mb-3",attrs:{size:"sm",prepend:"優惠券"}},[o("b-form-input",{attrs:{id:"coupon-input",placeholder:t.prompt,state:t.couponState,"aria-describedby":"coupon-error",trim:""},model:{value:t.coupon,callback:function(e){t.coupon=e},expression:"coupon"}}),o("b-input-group-append",[null!=t.couponState&&t.couponState?o("b-button",{attrs:{size:"sm",id:"coupon_submit",text:"Button",variant:"success"},on:{click:t.modifyCoupon}},[t._v("修改")]):o("b-button",{attrs:{size:"sm",id:"coupon_submit",text:"Button",variant:"success"},on:{click:function(e){return t.checkCoupon(t.coupon)}}},[t._v("使用")])],1),o("b-form-invalid-feedback",{staticClass:"error_msg",attrs:{id:"coupon-error"}},[t._v(" "+t._s(t.errorMessage)+" ")])],1)],1):t._e(),0!=t.productNum?o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-9 tlprice"},[t._v("小計(共"+t._s(t.productNum)+"項餐點)")]),o("div",{staticClass:"col-md-3 tlprice",staticStyle:{"text-align":"end"}},[t._v(t._s(t.beforePrice))])]):t._e(),0!=t.productNum?o("div",{staticClass:"row "},[o("div",{staticClass:"col-md-9 tlprice"},[t._v("折扣")]),o("div",{staticClass:"col-md-3 tlprice",staticStyle:{"text-align":"end"}},[t._v(t._s(t.disCountMoney))])]):t._e(),0!=t.productNum?o("div",{staticClass:"row "},[o("div",{staticClass:"col-md-9 tlprice"},[t._v("運費")]),0!=t.fee?o("div",{staticClass:"col-md-3 tlprice",staticStyle:{"text-align":"end"}},[t._v(t._s(t.fee))]):o("div",{staticClass:"col-md-3 tlprice",staticStyle:{"text-align":"end"}},[t._v("免運")])]):t._e(),0!=t.productNum?o("div",{staticClass:"row "},[o("div",{staticClass:"col-md-9 tlprice"},[t._v("總計 (包含稅項) :")]),o("div",{staticClass:"col-md-3 tlprice",staticStyle:{"text-align":"end"}},[t._v(t._s(t.totalPrice+t.fee))])]):t._e(),o("div",{staticClass:"row col-md-12"},[o("b-button",{staticClass:"checkOut",attrs:{id:"checkSb",variant:"info",disabled:t.submitInvalid,vertical:""},on:{click:t.onOk}},[t._v("結帳")])],1)],2)],1)}),u=[],l=(o("4de4"),o("a434"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-modal",{ref:"modal",attrs:{id:"login-modal",size:"sm",title:"會員登入","hide-footer":"","hide-header-close":""}},[o("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[o("b-form-group",{attrs:{label:"Account","label-for":"account-input","invalid-feedback":"Account is required",state:t.accountState}},[o("b-form-input",{ref:"account-input",attrs:{state:t.accountState,required:""},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),o("b-form-group",{attrs:{label:"Password","label-for":"password-input","invalid-feedback":"Password is required",state:t.passwordState}},[o("b-form-input",{ref:"password-input",attrs:{type:"password",state:t.passwordState,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),o("b-alert",{attrs:{fade:"",show:t.showAlert,variant:"danger"}},[t._v(t._s(t.errorMsg))]),o("div",{staticClass:"row m-2",staticStyle:{"justify-content":"space-around"}},[o("b-button",{attrs:{variant:"info",size:"sm"},on:{click:t.submit}},[t._v("CONFIRM")]),o("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.$emit("close")}}},[t._v("CANCEL")])],1)],1)],1)}),h=[];function d(t){this.message=t}d.prototype=new Error,d.prototype.name="InvalidCharacterError";var p="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new d("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,s,i=0,n=0,r="";s=e.charAt(n++);~s&&(o=i%4?64*o+s:s,i++%4)?r+=String.fromCharCode(255&o>>(-2*i&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return r};function f(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(p(t).replace(/(.)/g,(function(t,e){var o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}(e)}catch(t){return p(e)}}function m(t){this.message=t}function b(t,e){if("string"!=typeof t)throw new m("Invalid token specified");var o=!0===(e=e||{}).header?0:1;try{return JSON.parse(f(t.split(".")[o]))}catch(t){throw new m("Invalid token specified: "+t.message)}}m.prototype=new Error,m.prototype.name="InvalidTokenError";var v=b,g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-modal",{ref:"modal",attrs:{id:"signUp-modal",size:"lg",title:"會員註冊","hide-footer":"","hide-header-close":""}},[o("form",{ref:"SignUp",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[o("b-row",[o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:"暱稱","label-for":"name-input","invalid-feedback":"暱稱不可為空",state:t.nameState}},[o("b-form-input",{ref:"name-input",attrs:{state:t.nameState,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),o("b-form-group",{attrs:{label:"帳號","label-for":"username-input","invalid-feedback":"帳號不可為空",state:t.usernameState}},[o("b-form-input",{ref:"username-input",attrs:{type:"text",state:t.usernameState,required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),o("b-form-group",{attrs:{label:"密碼","label-for":"password-input","invalid-feedback":"密碼不可為空",state:t.passwordState}},[o("b-form-input",{ref:"password-input",attrs:{type:"password",state:t.passwordState,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("b-form-group",{attrs:{label:"確認密碼","label-for":"checkPassword-input","invalid-feedback":"與密碼不同",state:t.checkPasswordState}},[o("b-form-input",{ref:"checkPassword-input",attrs:{type:"password",state:t.checkPasswordState,required:""},model:{value:t.checkPassword,callback:function(e){t.checkPassword=e},expression:"checkPassword"}})],1)],1),o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:"電話號碼","label-for":"phone-input","invalid-feedback":"電話號碼錯誤",state:t.phoneState}},[o("b-form-input",{ref:"phone-input",attrs:{type:"tel",state:t.phoneState,required:""},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),o("b-form-group",{attrs:{label:"電子信箱","label-for":"email-input","invalid-feedback":"電子信箱錯誤",state:t.emailState}},[o("b-form-input",{ref:"email-input",attrs:{type:"email",state:t.emailState,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),o("b-form-group",{attrs:{label:"性別","label-for":"sex-input","invalid-feedback":"性別不可為空",state:t.sexState}},[o("b-form-select",{ref:"sex-input",attrs:{state:t.sexState,options:t.sexOptions,required:""},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}})],1)],1)],1)],1),o("b-alert",{attrs:{fade:"",show:t.showAlert,variant:"danger"}},[t._v(t._s(t.errorMsg))]),o("div",{staticClass:"row m-2",staticStyle:{"justify-content":"space-around"}},[o("b-button",{attrs:{variant:"info",size:"sm"},on:{click:t.submit}},[t._v("CONFIRM")]),o("b-button",{attrs:{variant:"info",size:"sm"},on:{click:function(e){return t.$emit("close")}}},[t._v("CANCEL")])],1)],1)],1)},w=[],k=(o("c975"),{name:"SignUpForm",data:function(){return{name:null,username:null,password:null,checkPassword:null,phone:null,email:null,sex:null,showAlert:!1,sexOptions:[{value:!0,text:"男"},{value:!1,text:"女"}],errorMsg:""}},computed:{nameState:function(){return null===this.name?null:this.name.length>0},usernameState:function(){return null===this.username?null:this.username.length>0},passwordState:function(){return null===this.password?null:this.password.length>0},checkPasswordState:function(){return null===this.checkPassword?null:this.checkPassword.length>0&&this.checkPassword==this.password},phoneState:function(){return null===this.phone?null:10==this.phone.length&&"0"==this.phone.substr(0,1)},emailState:function(){return null===this.email?null:this.email.length>0&&-1!=this.email.indexOf("@")},sexState:function(){return null!==this.sex||null}},methods:{checkFormValidity:function(){var t=this.$refs["name-input"].checkValidity(),e=this.$refs["username-input"].checkValidity(),o=this.$refs["password-input"].checkValidity(),s=this.$refs["checkPassword-input"].checkValidity(),i=this.$refs["phone-input"].checkValidity(),n=this.$refs["email-input"].checkValidity();return t&&e&&o&&s&&i&&n&&this.sexState},submit:function(){if(!this.checkFormValidity())return this.name=null,this.username=null,this.password=null,this.checkPassword=null,this.phone=null,this.email=null,void(this.sex=null);this.$_verification(this.name,this.username,this.password,this.phone,this.email,this.sex)},$_verification:function(t,e,o,s,i,n){var r=this,a="/auth/register";this.$axios.post(this.$url+a,{member:{name:t,username:e,password:o,phone:s,email:i,member_status:0,permission:2},customer:{sex:n}}).then((function(t){r.showAlert=!1;t.data;setTimeout((function(){r.$fire({title:"註冊成功",text:"Successfully logged in",type:"success",timer:5e3})}),300),r.$emit("close")})).catch((function(t){var e=t.response.status;switch(e){case 401:r.errorMsg="Invalid account or password",r.showAlert=!0;break;case 500:r.errorMsg="Unknown error",r.showAlert=!0;break}}))},reset:function(){this.name=null,this.username=null,this.password=null,this.checkPassword=null,this.phone=null,this.email=null,this.sex=null,this.showAlert=!1}}}),y=k,$=o("2877"),C=Object($["a"])(y,g,w,!1,null,"651fd93a",null),S=C.exports,_={name:"LoginForm",components:{SignUpForm:S},data:function(){return{account:null,password:null,showAlert:!1,errorMsg:""}},computed:{accountState:function(){return null===this.account?null:this.account.length>0},passwordState:function(){return null===this.password?null:this.password.length>0}},methods:{checkFormValidity:function(){var t=this.$refs["account-input"].checkValidity(),e=this.$refs["password-input"].checkValidity();return t&&e},submit:function(){if(!this.checkFormValidity())return this.account="",void(this.password="");this.$_verification(this.account,this.password)},$_verification:function(t,e){var o=this,s="/auth/login";this.$axios.post(this.$url+s,{username:this.account,password:this.password}).then((function(t){o.showAlert=!1;var e=t.data,s=v(e.access_token);o.$store.dispatch("auth/setToken",e.access_token),o.$store.dispatch("auth/setExpireDate",Date.now()+s.exp),o.$store.dispatch("auth/setUser",s.user),o.$emit("success",s.user.name),setTimeout((function(){o.$fire({title:"登入成功",text:"Successfully logged in",type:"success",timer:5e3})}),300),o.$emit("close"),1==o.$store.getters["auth/user"].permission&&o.$router.push({name:"ShopManage"})})).catch((function(t){var e=t.response.status;switch(e){case 401:o.errorMsg="Invalid account or password",o.showAlert=!0;break;case 500:o.errorMsg="Unknown error",o.showAlert=!0;break;case 400:o.errorMsg="Login failed. Please contact the administrator.",o.showAlert=!0;break}o.account=null,o.password=null}))},reset:function(){this.account=null,this.password=null,this.showAlert=!1}}},x=_,M=Object($["a"])(x,l,h,!1,null,"e282d22c",null),P=M.exports,N=o("5affb"),I={name:"ShoppingCart",components:{CartCell:N["a"]},data:function(){return{coupon:null,couponState:null,prompt:"請輸入優惠卷",bookingShopName:null,CouponItems:[],ItemList:[{foodName:null,foodPrice:null,quantity:null,id:null}],beforePrice:null,totalPrice:null,popoverShow:!1,submitInvalid:!1,disCountMoney:0,productNum:null,errorMessage:"",fee:30}},methods:{loadingData:function(){this.ItemList=[],this.totalPrice=0,this.productNum=0,this.disCountMoney=0,this.coupon=null,this.couponState=null,this.submitInvalid=!1;var t=JSON.parse(this.$cookie.get("product")),e=JSON.parse(this.$cookie.get("coupon"));if(this.bookingShopName=this.$cookie.get("shopName"),null==t)this.submitInvalid=!0;else for(var o=0;o<t.length;o++)this.beforePrice=this.totalPrice+t[o].foodPrice*t[o].quantity,this.totalPrice=this.beforePrice,this.ItemList.push({foodName:t[o].foodName,quantity:t[o].quantity,foodPrice:t[o].foodPrice,id:t[o].id}),this.productNum+=this.ItemList[o].quantity;null!=e&&(this.coupon=e.coupon.code,this.useValidCoupon(),this.useCouponDiscount(e),this.$cookie.set("discount",Math.round(this.disCountMoney),{path:"/"}))},dataToCashier:function(){return this.ItemList},checkLogin:function(){var t=this,e=!(null==this.$store.getters["auth/token"]);return e||this.$fire({type:"warning",title:"請先登入",text:"您必須登入後才能使用此功能",confirmButtonText:"`登入"}).then((function(e){t.showModal()})),e},useCouponDiscount:function(t){var e=this;this.disCountMoney=0;var o=JSON.parse(this.$cookie.get("product"));if(0==t.coupon.type)this.fee=0;else if(1==t.coupon.type)this.disCountMoney=Math.floor(this.beforePrice*(100-100*t.coupon.discount)/100),this.totalPrice=this.totalPrice-this.disCountMoney;else if(2==t.coupon.type){for(var s=function(s){var i=o.filter((function(e){return e.id==t.coupon_items[s].product_id}));e.disCountMoney+=t.coupon_items[s].quantity*t.coupon.discount*i[0].foodPrice},i=0;i<t.coupon_items.length;i++)s(i);this.totalPrice-=this.disCountMoney}},checkCoupon:function(t){var e=this;if(this.checkLogin()){var o=this.$cookie.get("shopId"),s=this.$cookie.get("product"),i={coupon_code:t,seller_id:o,orderItems:s,total_price:this.beforePrice};this.$http.post("/customer/coupon/use",i,{headers:{Authorization:"Bearer "+this.$store.getters["auth/token"]}}).then((function(t){e.$confirm("輸入優惠券後無法更改商品，欲修改商品請先移除優惠券。","使用說明","warning").then((function(){e.useValidCoupon(),e.useCouponDiscount(t.data.coupon),e.$cookie.set("coupon",JSON.stringify(t.data.coupon),{path:"/"}),e.$cookie.set("discount",e.disCountMoney,{path:"/"}),e.$alert("","輸入成功","success")}))})).catch((function(t){e.couponState=!1,e.errorMessage=t.response.data.message}))}},useValidCoupon:function(){function t(){var e=document.querySelector("#coupon-input");null==e?setTimeout(t.bind(this),100):e.setAttribute("readOnly","true")}t(),this.lockChagneButton(),this.couponState=!0},lockChagneButton:function(){this.$bus.$emit("lockbutton")},unlockChangeButton:function(){this.$bus.$emit("unlockbutton")},modifyCoupon:function(){this.deleteCoupon()},modifySpinValue:function(t,e){var o=JSON.parse(this.$cookie.get("product"));o[t].quantity=e,document.cookie="product=; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.$cookie.set("product",JSON.stringify(o),{path:"/"}),this.beforePrice=this.beforePrice+(e-this.ItemList[t].quantity)*this.ItemList[t].foodPrice,this.totalPrice=this.beforePrice-this.disCountMoney,this.productNum+=e-this.ItemList[t].quantity,this.ItemList[t].quantity=e},deleteCartCell:function(t){this.productNum-=this.ItemList[t].quantity,this.beforePrice=this.beforePrice-this.ItemList[t].foodPrice*this.ItemList[t].quantity,this.totalPrice=this.beforePrice,this.ItemList.splice(t,1),0==this.totalPrice&&(this.bookingShopName=null,this.totalPrice=null),0==this.ItemList.length?(this.submitInvalid=!0,document.cookie="shopId=; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="shopName=; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="product=; expires=Thu, 01 Jan 1970 00:00:00 GMT"):this.$cookie.set("product",JSON.stringify(this.ItemList),{path:"/"})},deleteCoupon:function(){var t=document.querySelector("#coupon-input");this.couponState=null,this.disCountMoney=0,this.fee=30,this.totalPrice=this.beforePrice,this.unlockChangeButton(),t.removeAttribute("readOnly"),document.cookie="coupon=; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="discount=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},showModal:function(){this.$bvModal.show("login-modal")},confirmModal:function(){this.$bus.$emit("cashier",this.dataToCashier())},onClose:function(){this.popoverShow=!1},onOk:function(){this.checkLogin()&&(this.confirmModal(),this.onClose(),this.$cookie.set("beforePrice",this.beforePrice,{path:"/"}),this.$cookie.set("totalPrice",this.totalPrice,{path:"/"}),"Cashier"==this.$router.currentRoute["name"]?window.location.reload():this.$router.push("/cashier"))},add:function(t,e,o){this.ItemList.push({foodName:t,foodPrice:o,quantity:e})},handleScroll:function(){this.onClose()},handleopen:function(){}},watch:{$route:{handler:function(){this.onClose()}}},created:function(){},mounted:function(){var t=document.querySelector(".container");t.addEventListener("click",this.handleScroll)}},L=I,O=(o("dd76"),Object($["a"])(L,c,u,!1,null,"7257f3b0",null)),q=O.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.logined?t._e():o("b-button",{staticClass:"mr-1",on:{click:t.showSignUpModal}},[t._v("SignUp")]),t.logined?o("b-dropdown",{staticClass:"m-md-2",staticStyle:{"min-width":"4rem"},attrs:{id:"dropdown",text:t.loginMsg,right:""}},[2==this.$store.getters["auth/user"].permission?o("b-dropdown-item",{attrs:{to:{name:"History"}}},[t._v("History")]):t._e(),1==this.$store.getters["auth/user"].permission?o("b-dropdown-item",{attrs:{to:{name:"ShopManage"}}},[t._v("ShopManage")]):t._e(),this.$store.getters["auth/user"].permission<=1?o("b-dropdown-item",{attrs:{to:{name:"SalesReport"}}},[t._v("Manage")]):t._e(),o("b-dropdown-item",{on:{click:t.logout}},[t._v("Logout")])],1):o("b-button",{staticClass:"ml-1",on:{click:t.showLoginModal}},[t._v("Login")]),o("SignUpForm",{ref:"SignUp",on:{close:t.closeModal}}),o("LoginForm",{ref:"form",on:{close:t.closeModal,success:t.loginSuccess}})],1)},T=[],U={name:"LoginNav",components:{LoginForm:P,SignUpForm:S},beforeMount:function(){this.$store.getters["auth/expired"]?null!=this.$store.getters["auth/token"]?this.refreshToken(this.$store.getters["auth/token"]):this.$store.dispatch("auth/invalidate"):this.loginSuccess(this.$store.getters["auth/user"].name)},data:function(){return{logined:!1,loginMsg:null}},methods:{showLoginModal:function(){this.$refs.form.reset(),this.$bvModal.show("login-modal")},showSignUpModal:function(){this.$refs.SignUp.reset(),this.$bvModal.show("signUp-modal")},closeModal:function(){this.$refs.form.reset(),this.$refs.SignUp.reset(),this.$bvModal.hide("login-modal"),this.$bvModal.hide("signUp-modal")},loginSuccess:function(t){this.logined=!0,this.loginMsg="Hi "+t},logout:function(){var t=this,e="/auth/logout";this.$axios.post(this.$url+e,{},{headers:{Authorization:"Bearer "+this.$store.getters["auth/token"]}}).then((function(e){t.logined=!1,t.$store.dispatch("auth/invalidate"),t.$fire({title:"登出成功",text:e.data.message,type:"success",timer:5e3}),"/"!=t.$route.path&&t.$router.push("/")})).catch((function(e){t.logined=!1,t.$store.dispatch("auth/invalidate"),t.$fire({title:"登出成功",text:"Successfully logged out",type:"success",timer:5e3}),"/"!=t.$route.path&&t.$router.push("/")}))},refreshToken:function(t){var e=this,o="/auth/refresh";this.$axios.post(this.$url+o,{},{headers:{Authorization:"Bearer "+t}}).then((function(t){var o=t.data,s=v(o.access_token);e.$store.dispatch("auth/setToken",o.access_token),e.$store.dispatch("auth/setExpireDate",s.exp),e.$store.dispatch("auth/setUser",s.user),e.$emit("success",s.user.name)})).catch((function(t){e.$store.dispatch("auth/invalidate"),e.$router.push("/")}))}}},E=U,V=(o("34be"),Object($["a"])(E,A,T,!1,null,"3ff446c6",null)),F=V.exports,H={name:"main-header",components:{ShoppingCart:q,LoginNav:F},data:function(){return{keywords:"",search_result:[],search_shopName:[],showShoppingCart:!0}},methods:{reset:function(){this.keywords="",this.search_result=[],this.$store.dispatch("auth/cleanSearchResult"),this.$store.dispatch("auth/cleanKeywords")},showHistory:function(){},goHome:function(){this.reset(),this.$bus.$emit("resetHome"),"/"!=this.$route.path&&this.$router.push("/")},goSearch:function(){this.$store.dispatch("auth/setSearchResult",this.search_result),this.$store.dispatch("auth/setKeywords",this.keywords),this.$bus.$emit("reloadHome"),"/"!=this.$route.path&&this.$router.push("/")}},computed:{},watch:{keywords:function(t,e){var o=this,s=t.split(" ").map((function(t){return"keywords[]="+t})),i="/restaurants/search?"+s.join("&");this.$axios.get(this.$url+i).then((function(t){o.search_result=t.data,o.search_shopName=[];for(var e=0;e<o.search_result.length;e++)o.search_shopName.push(o.search_result[e].name)})).catch((function(t){}))},$route:{handler:function(){"Cashier"==this.$router.currentRoute["name"]?this.showShoppingCart=!1:this.showShoppingCart=!0}}},created:function(){"Cashier"==this.$router.currentRoute["name"]?this.showShoppingCart=!1:this.showShoppingCart=!0},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){},destroyed:function(){},errorCaptured:function(){}},J=H,D=(o("6a5b"),Object($["a"])(J,r,a,!1,null,"531090f3",null)),z=D.exports,B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bottom"},[o("b-navbar",{staticClass:"d-flex justify-content-center",attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[o("b-navbar-brand",{attrs:{href:"#"}},[t._v("Bottom Bar")])],1)],1)},j=[],R={name:"main-footer",components:{},data:function(){return{}},computed:{displayYMD:function(){return(new Date).getFullYear().toString()}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){},destroyed:function(){},errorCaptured:function(){}},G=R,K=(o("559a"),Object($["a"])(G,B,j,!1,null,"64607431",null)),Y=K.exports,Q={name:"main-layout",components:{MainHeader:z,MainFooter:Y},data:function(){return{}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var t=document.querySelector(".html"),e=document.querySelector(".body"),o=document.querySelector(".header"),s=document.querySelector(".bottom"),i=s.clientHeight,n=t.clientHeight-i-o.clientHeight;e.style.minHeight=n.toString()+"px"},beforeUpdate:function(){},updated:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){},destroyed:function(){},errorCaptured:function(){}};n["default"].prototype.$bus=new n["default"];var W=Q,X=(o("6f18"),Object($["a"])(W,s,i,!1,null,null,null));e["default"]=X.exports},"1ffa":function(t,e,o){},"34be":function(t,e,o){"use strict";o("68cf")},"504a":function(t,e,o){},"559a":function(t,e,o){"use strict";o("9595")},"68cf":function(t,e,o){},"6a5b":function(t,e,o){"use strict";o("504a")},"6f18":function(t,e,o){"use strict";o("e031")},9595:function(t,e,o){},c975:function(t,e,o){"use strict";var s=o("23e7"),i=o("4d64").indexOf,n=o("a640"),r=o("ae40"),a=[].indexOf,c=!!a&&1/[1].indexOf(1,-0)<0,u=n("indexOf"),l=r("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(t){return c?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},d81d:function(t,e,o){"use strict";var s=o("23e7"),i=o("b727").map,n=o("1dde"),r=o("ae40"),a=n("map"),c=r("map");s({target:"Array",proto:!0,forced:!a||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dd76:function(t,e,o){"use strict";o("1ffa")},e031:function(t,e,o){}}]);